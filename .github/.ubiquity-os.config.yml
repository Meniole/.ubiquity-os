# x
walletWith: &walletWith
  registerWalletWithVerification: false

daemonPricingWith: &daemonPricingWith
  labels:
    time:
      - name: "Time: <1 Hour"
        collaboratorOnly: true
      - name: "Time: <2 Hours"
        collaboratorOnly: false
      - name: "Time: <4 Hours"
        collaboratorOnly: false
      - name: "Time: <1 Day"
        collaboratorOnly: false
      - name: "Time: <1 Week"
        collaboratorOnly: true
    priority:
      - name: "Priority: 1 (Normal)"
        collaboratorOnly: false
      - name: "Priority: 2 (Medium)"
        collaboratorOnly: false
      - name: "Priority: 3 (High)"
        collaboratorOnly: true
      - name: "Priority: 4 (Urgent)"
        collaboratorOnly: false
      - name: "Priority: 5 (Emergency)"
        collaboratorOnly: true
  basePriceMultiplier: 3
  globalConfigUpdate:
    excludeRepos: []
  publicAccessControl:
    setLabel: true
    fundExternalClosedIssue: false

startStopWith: &startStopWith
  reviewDelayTolerance: "3 Days"
  taskStaleTimeoutDuration: "1 minute"
  maxConcurrentTasks:
    member: 1
    contributor: 1
  startRequiresWallet: false
  rolesWithReviewAuthority:
    - "OWNER"
    - "MEMBER"

telegramWith: &telegramWith
  botId: 5112548588

plugins:
  # - uses:
  #   - plugin: http://localhost:4001
  #     with: *daemonPricingWith
  # - uses:
  #   - plugin: Meniole/telegram-bridge@feat/build
  #     with: *telegramWith
  - uses:
    - plugin: http://localhost:4000
      with: *startStopWith
  
  # - uses:
  #   - plugin: Meniole/daemon-pricing@feat/label-gating
  #   # - plugin: https://ubiquity-os-daemon-pricing-feat-label-gating.fernand-veyrier.workers.dev  
  #     with: *daemonPricingWith
  # - uses:
  #   - plugin: Meniole/automated-merging@feat/schema-validation
  #     with:
  #       approvalsRequired:
  #         collaborator: "10"
  #       mergeTimeout:
  #         collaborator: "2 minutes"
  #       repos:
  #         monitor: [ ]
  #         ignore: ["conversation-rewards"]
  #       allowedReviewerRoles: ["OWNER", "COLLABORATOR", true]
  # # # - uses:
  # # #   - some-stuff: {}
  # # # - test: "invalid 1"
  # # #   uses:
  # # #     - plugin: "test"
  # - uses:
  #   - plugin: https://ubiquibot-command-wallet-development.fernand-veyrier.workers.dev
  #     with:
  #       registerWalletWithVerification: false
  # - uses:
  #   - plugin: https://command-query-user-development.fernand-veyrier.workers.dev
  #     with:
  #       allowPublicQuery: true
  # - uses:
  #   - plugin: Meniole/assistive-pricing@fork/ubq-testing/development
  #     with:
  #       labels:
  #         time:
  #           - name: "Time: <1.5 Minutes"
  #             collaboratorOnly: true
  #           - name: "Time: <1 Hour"
  #           - name: "Time: <2 Hours"
  #             collaboratorOnly: false
  #           - name: "Time: <4 Hours"
  #           - name: "Time: <1 Day"
  #             collaboratorOnly: true
  #           - name: "Time: <1 Week"
  #             collaboratorOnly: true
  #         priority:
  #           - name: "Priority: 1 (Normal)"
  #             collaboratorOnly: false
  #           - name: "Priority: 2 (Medium)"
  #             collaboratorOnly: true
  #           - name: "Priority: 3 (High)"
  #             collaboratorOnly: true
  #           - name: "Priority: 4 (Urgent)"
  #             collaboratorOnly: true
  #           - name: "Priority: 5 (Emergency)"
  #       basePriceMultiplier: 2
  #       globalConfigUpdate:
  #         excludeRepos: []
  #       publicAccessControl:
  #         setLabel: true
  #         fundExternalClosedIssue: false
  # - skipBotEvents: false
  # - uses:
  #   - plugin: https://ubiquibot-command-start-stop-development.fernand-veyrier.workers.dev
  #     with: *startStopWith
  - uses:
    # - plugin: Meniole/conversation-rewards@feat/fee-value
    - plugin: Meniole/conversation-rewards@fix/zero-display
      with:
        logLevel: "debug"
        evmNetworkId: 100
        evmPrivateEncrypted: "CfuT-byEUxpZYTwp_DSwCUuIIooaqTI2oWmZtVEsLBk34iYFU7qjhT9mM9HGbgRhurUt-4l51kygfQIUwvYkCi2acpTPxSHTsFQBrZOScll5XvOu-nEwxtKnUhhxXgXTjdE"
        incentives:
          requirePriceLabel: true
          contentEvaluator:
            openAi:
              endpoint: "https://api.groq.com/openai/v1"
              model: "llama3-groq-70b-8192-tool-use-preview"
          userExtractor:
            enabled: true
            redeemTask: true
          dataPurge: {}
          # formattingEvaluator:
          #   multipliers:
          #     - role:
          #       - ISSUE_SPECIFICATION
          #       multiplier: 3
          #       rewards:
          #         wordValue: 0.1
          #         html:
          #           br:
          #             score: 0
          #             countWords: true
          #           code:
          #             score: 5
          #             countWords: false
          #           p:
          #             score: 0
          #             countWords: true
          #           em:
          #             score: 0
          #             countWords: true
          #           img:
          #             score: 5
          #             countWords: true
          #           strong:
          #             score: 0
          #             countWords: false
          #           blockquote:
          #             score: 0
          #             countWords: false
          #           h1:
          #             score: 1
          #             countWords: true
          #           h2:
          #             score: 1
          #             countWords: true
          #           h3:
          #             score: 1
          #             countWords: true
          #           h4:
          #             score: 1
          #             countWords: true
          #           h5:
          #             score: 1
          #             countWords: true
          #           h6:
          #             score: 1
          #             countWords: true
          #           a:
          #             score: 5
          #             countWords: true
          #           li:
          #             score: 0.5
          #             countWords: true
          #           ul:
          #             score: 1
          #             countWords: true
          #           td:
          #             score: 0
          #             countWords: true
          #           hr:
          #             score: 0
          #             countWords: true
          #           pre:
          #             score: 0
          #             countWords: false
          #           ol:
          #             score: 1
          #             countWords: true
          #     - role:
          #       - ISSUE_AUTHOR
          #       - ISSUE_COLLABORATOR
          #       - PULL_COLLABORATOR
          #       multiplier: 1
          #       rewards:
          #         wordValue: 0.1
          #         html:
          #           br:
          #             score: 0
          #             countWords: true
          #           code:
          #             score: 5
          #             countWords: false
          #           p:
          #             score: 0
          #             countWords: true
          #           em:
          #             score: 0
          #             countWords: true
          #           img:
          #             score: 5
          #             countWords: true
          #           strong:
          #             score: 0
          #             countWords: false
          #           blockquote:
          #             score: 0
          #             countWords: false
          #           h1:
          #             score: 1
          #             countWords: true
          #           h2:
          #             score: 1
          #             countWords: true
          #           h3:
          #             score: 1
          #             countWords: true
          #           h4:
          #             score: 1
          #             countWords: true
          #           h5:
          #             score: 1
          #             countWords: true
          #           h6:
          #             score: 1
          #             countWords: true
          #           a:
          #             score: 5
          #             countWords: true
          #           li:
          #             score: 0.5
          #             countWords: true
          #           ul:
          #             score: 1
          #             countWords: true
          #           td:
          #             score: 0
          #             countWords: true
          #           hr:
          #             score: 0
          #             countWords: true
          #           pre:
          #             score: 0
          #             countWords: false
          #           ol:
          #             score: 1
          #             countWords: true
          #     - role:
          #       - ISSUE_CONTRIBUTOR
          #       - PULL_CONTRIBUTOR
          #       multiplier: 0.25
          #       rewards:
          #         wordValue: 0.1
          #         html:
          #           br:
          #             score: 0
          #             countWords: true
          #           code:
          #             score: 5
          #             countWords: false
          #           p:
          #             score: 0
          #             countWords: true
          #           em:
          #             score: 0
          #             countWords: true
          #           img:
          #             score: 5
          #             countWords: true
          #           strong:
          #             score: 0
          #             countWords: false
          #           blockquote:
          #             score: 0
          #             countWords: false
          #           h1:
          #             score: 1
          #             countWords: true
          #           h2:
          #             score: 1
          #             countWords: true
          #           h3:
          #             score: 1
          #             countWords: true
          #           h4:
          #             score: 1
          #             countWords: true
          #           h5:
          #             score: 1
          #             countWords: true
          #           h6:
          #             score: 1
          #             countWords: true
          #           a:
          #             score: 5
          #             countWords: true
          #           li:
          #             score: 0.5
          #             countWords: true
          #           ul:
          #             score: 1
          #             countWords: true
          #           td:
          #             score: 0
          #             countWords: true
          #           hr:
          #             score: 0
          #             countWords: true
          #           pre:
          #             score: 0
          #             countWords: false
          #           ol:
          #             score: 1
          #             countWords: true
          #     - role:
          #       - PULL_SPECIFICATION
          #       - PULL_AUTHOR
          #       - ISSUE_ASSIGNEE
          #       - PULL_ASSIGNEE
          #       multiplier: 0
          #       rewards:
          #         wordValue: 0
          #         html:
          #           br:
          #             score: 0
          #             countWords: true
          #           code:
          #             score: 5
          #             countWords: false
          #           p:
          #             score: 0
          #             countWords: true
          #           em:
          #             score: 0
          #             countWords: true
          #           img:
          #             score: 5
          #             countWords: true
          #           strong:
          #             score: 0
          #             countWords: false
          #           blockquote:
          #             score: 0
          #             countWords: false
          #           h1:
          #             score: 1
          #             countWords: true
          #           h2:
          #             score: 1
          #             countWords: true
          #           h3:
          #             score: 1
          #             countWords: true
          #           h4:
          #             score: 1
          #             countWords: true
          #           h5:
          #             score: 1
          #             countWords: true
          #           h6:
          #             score: 1
          #             countWords: true
          #           a:
          #             score: 5
          #             countWords: true
          #           li:
          #             score: 0.5
          #             countWords: true
          #           ul:
          #             score: 1
          #             countWords: true
          #           td:
          #             score: 0
          #             countWords: true
          #           hr:
          #             score: 0
          #             countWords: true
          #           pre:
          #             score: 0
          #             countWords: false
          #           ol:
          #             score: 1
          #             countWords: true
            # wordCountExponent: 0.85
          permitGeneration:
            enabled: true
          githubComment:
            post: true
            debug: false
  # - uses:
  #   - plugin: Meniole/user-activity-watcher@development
  #     with:
  #       disqualification: "2 minutes"
  #       warning: "1 minute"
  #       # eventWhitelist: # these are the tail of the webhook event i.e pull_request.review_requested
  #       #   - "review_requested"
  #       #   - "ready_for_review"
  #       #   - "commented"
  #       #   - "committed"
  #       watch:
  #         optOut:
  #           - "repoName"
  #           - "repoName2"
  # - uses:
  #   # - plugin: Meniole/issue-comment-embeddings@fork/sshivaditya2019/development
  #   - plugin: https://ubiquibot-issue-comment-embeddings-main.fernand-veyrier.workers.dev
